<svg style="display: none;">
  <!-- USER -->
  <symbol id="icon-user" viewBox="0 0 24 24">
    <path d="M12 12c2.8 0 5-2.2 5-5s-2.2-5-5-5-5 
    2.2-5 5 2.2 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z" />
  </symbol>

  <!-- HOME -->
  <symbol id="icon-home" viewBox="0 0 24 24">
    <path d="M12 3l9 8h-3v10h-12v-10h-3z" />
  </symbol>

  <!-- ID CARD -->
  <symbol id="icon-id" viewBox="0 0 24 24">
    <path d="M3 4h18v16h-18v-16zm2 3v2h4v-2h-4zm8 0v2h6v-2h-6zm-8 4v2h4v-2h-4zm8 
    0v2h6v-2h-6zm-8 4v2h10v-2h-10z" />
  </symbol>

  <!-- OFFICE -->
  <symbol id="icon-office" viewBox="0 0 24 24">
    <path d="M3 3h18v18h-18v-18zm4 4h2v2h-2v-2zm4 0h2v2h-2v-2zm4 
    0h2v2h-2v-2zm-8 4h2v2h-2v-2zm4 0h2v2h-2v-2zm4 
    0h2v2h-2v-2zm-8 4h10v2h-10v-2z" />
  </symbol>

  <!-- CHECK CIRCLE -->
  <symbol id="icon-check-circle" viewBox="0 0 24 24">
    <path d="M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 
    10-10-4.5-10-10 4.5-10 10-10zm-1 14l7-7-1.4-1.4-5.6 
    5.6-2.6-2.6-1.4 1.4 4 4z" />
  </symbol>

  <!-- CHECK -->
  <symbol id="icon-check" viewBox="0 0 24 24">
    <path d="M20 6l-11 11-5-5 1.4-1.4 3.6 3.6 9.6-9.6z" />
  </symbol>

  <!-- CROSS -->
  <symbol id="icon-cross" viewBox="0 0 24 24">
    <path d="M6 6l12 12m0-12l-12 12" stroke="#000" stroke-width="2" fill="none" stroke-linecap="round" />
  </symbol>
</svg>

<!-- Full-bleed Wizard Page (updated) -->
<main class="w-full min-h-screen bg-gray-50">
  <!-- container: to center & give left column breathing room -->
  <div class="max-w-screen-2xl mx-auto px-6 py-8">

    <!-- WRAPPER: left = main scrollable area, right = fixed aside -->
    <div class="relative">

      <!-- LEFT: main card â€” ADD right margin to avoid overlap with fixed aside -->
      <div class="mr-0 lg:mr-[320px]"> <!-- reserve space for fixed aside (width + gap) -->
        <div class="card wizard-card w-full rounded-2xl overflow-hidden bg-white shadow-sm">
          <div class="card-body mt-1 p-6 md:p-8 w-full min-w-0">

            <!-- HEADER: page path (left) + Edit Names button (right) -->
            <div class="mb-4 flex items-center justify-between">
              <nav class="text-sm text-gray-600" aria-label="Breadcrumb">
                <ol class="flex items-center gap-2">
                  <li class="flex items-center gap-2">
                    <span class="text-gray-400">/</span>
                    <a class="hover:underline text-gray-600" routerLink="/USERMASTER/dashboard">Home</a>
                  </li>
                  <li class="text-gray-300">/</li>
                  <li class="font-semibold text-gray-800">Deposite Account Opening</li>
                </ol>
              </nav>

              <div class="flex items-center gap-3">
                <button type="button"
                  class="inline-flex items-center gap-2 px-3 py-2 rounded-md bg-white border border-gray-200 text-sm font-medium shadow-sm hover:bg-gray-50"
                  title="Edit display names" (click)="openEdit()" *ngIf="!isEditMode">
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" stroke-width="2"
                    viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18.5 2.5a2.1 2.1 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
                  </svg>
                  Edit Names
                </button>

                <button type="button"
                  class="inline-flex items-center gap-2 px-3 py-2 rounded-md bg-white border border-gray-200 text-sm font-medium shadow-sm hover:bg-gray-50"
                  title="New names" (click)="openEdit()" *ngIf="isEditMode">
                  <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" stroke-width="2"
                    viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round"
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18.5 2.5a2.1 2.1 0 013 3L12 15l-4 1 1-4 9.5-9.5z" />
                  </svg>
                  New Names
                </button>
              </div>
            </div>
            <!-- /HEADER -->

            <!-- STEP radios (hidden) -->
            <input class="wizard-state" type="radio" name="wizard" id="step-1" checked />
            <input class="wizard-state" type="radio" name="wizard" id="step-2" />
            <input class="wizard-state" type="radio" name="wizard" id="step-3" />
            <input class="wizard-state" type="radio" name="wizard" id="step-4" />
            <input class="wizard-state" type="radio" name="wizard" id="step-5" />

            <!-- Stepper (kept intact) -->
            <div class="wizard-steps my-6 w-full">
              <div
                class="max-w-screen-2xl mx-auto flex items-center justify-center gap-6 md:gap-10 lg:gap-14 w-full px-4 min-w-0">
                <div
                  class="step w-10 h-10 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all duration-200"
                  [ngClass]="getStepClass(1)" (click)="tryOpenStep(1)">
                  <ng-container [ngSwitch]="getStepIcon(1)">

                    <!-- ACTIVE ICONS -->
                    <svg *ngSwitchCase="'user'" class="step-svg">
                      <use href="#icon-user" />
                    </svg>
                    <svg *ngSwitchCase="'home'" class="step-svg">
                      <use href="#icon-home" />
                    </svg>
                    <svg *ngSwitchCase="'id'" class="step-svg">
                      <use href="#icon-id" />
                    </svg>
                    <svg *ngSwitchCase="'office'" class="step-svg">
                      <use href="#icon-office" />
                    </svg>
                    <svg *ngSwitchCase="'check-circle'" class="step-svg">
                      <use href="#icon-check-circle" />
                    </svg>

                    <!-- VALID -->
                    <svg *ngSwitchCase="'check'" class="step-svg">
                      <use href="#icon-check" />
                    </svg>

                    <!-- INVALID -->
                    <svg *ngSwitchCase="'cross'" class="step-svg">
                      <use href="#icon-cross" />
                    </svg>

                    <!-- DEFAULT NUMBER -->
                    <span *ngSwitchDefault>{{ 1 }}</span>

                  </ng-container>
                </div>



                <div class="flex-1 h-0.5 bg-gray-200 max-w-[100px]"></div>

                <div
                  class="step w-10 h-10 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all duration-200"
                  [ngClass]="getStepClass(2)" (click)="tryOpenStep(2)">
                  <ng-container [ngSwitch]="getStepIcon(2)">

                    <!-- ACTIVE ICONS -->
                    <svg *ngSwitchCase="'user'" class="step-svg">
                      <use href="#icon-user" />
                    </svg>
                    <svg *ngSwitchCase="'home'" class="step-svg">
                      <use href="#icon-home" />
                    </svg>
                    <svg *ngSwitchCase="'id'" class="step-svg">
                      <use href="#icon-id" />
                    </svg>
                    <svg *ngSwitchCase="'office'" class="step-svg">
                      <use href="#icon-office" />
                    </svg>
                    <svg *ngSwitchCase="'check-circle'" class="step-svg">
                      <use href="#icon-check-circle" />
                    </svg>

                    <!-- VALID -->
                    <svg *ngSwitchCase="'check'" class="step-svg">
                      <use href="#icon-check" />
                    </svg>

                    <!-- INVALID -->
                    <svg *ngSwitchCase="'cross'" class="step-svg">
                      <use href="#icon-cross" />
                    </svg>

                    <!-- DEFAULT NUMBER -->
                    <span *ngSwitchDefault>{{ 2 }}</span>

                  </ng-container>
                </div>

                <div class="flex-1 h-0.5 bg-gray-200 max-w-[100px]"></div>

                <div
                  class="step w-10 h-10 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all duration-200"
                  [ngClass]="getStepClass(3)" (click)="tryOpenStep(3)">
                  <ng-container [ngSwitch]="getStepIcon(3)">

                    <!-- ACTIVE ICONS -->
                    <svg *ngSwitchCase="'user'" class="step-svg">
                      <use href="#icon-user" />
                    </svg>
                    <svg *ngSwitchCase="'home'" class="step-svg">
                      <use href="#icon-home" />
                    </svg>
                    <svg *ngSwitchCase="'id'" class="step-svg">
                      <use href="#icon-id" />
                    </svg>
                    <svg *ngSwitchCase="'office'" class="step-svg">
                      <use href="#icon-office" />
                    </svg>
                    <svg *ngSwitchCase="'check-circle'" class="step-svg">
                      <use href="#icon-check-circle" />
                    </svg>

                    <!-- VALID -->
                    <svg *ngSwitchCase="'check'" class="step-svg">
                      <use href="#icon-check" />
                    </svg>

                    <!-- INVALID -->
                    <svg *ngSwitchCase="'cross'" class="step-svg">
                      <use href="#icon-cross" />
                    </svg>

                    <!-- DEFAULT NUMBER -->
                    <span *ngSwitchDefault>{{ 3 }}</span>

                  </ng-container>
                </div>

                <div class="flex-1 h-0.5 bg-gray-200 max-w-[100px]"></div>

                <div
                  class="step w-10 h-10 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all duration-200"
                  [ngClass]="getStepClass(4)" (click)="tryOpenStep(4)">
                  <ng-container [ngSwitch]="getStepIcon(4)">

                    <!-- ACTIVE ICONS -->
                    <svg *ngSwitchCase="'user'" class="step-svg">
                      <use href="#icon-user" />
                    </svg>
                    <svg *ngSwitchCase="'home'" class="step-svg">
                      <use href="#icon-home" />
                    </svg>
                    <svg *ngSwitchCase="'id'" class="step-svg">
                      <use href="#icon-id" />
                    </svg>
                    <svg *ngSwitchCase="'office'" class="step-svg">
                      <use href="#icon-office" />
                    </svg>
                    <svg *ngSwitchCase="'check-circle'" class="step-svg">
                      <use href="#icon-check-circle" />
                    </svg>

                    <!-- VALID -->
                    <svg *ngSwitchCase="'check'" class="step-svg">
                      <use href="#icon-check" />
                    </svg>

                    <!-- INVALID -->
                    <svg *ngSwitchCase="'cross'" class="step-svg">
                      <use href="#icon-cross" />
                    </svg>

                    <!-- DEFAULT NUMBER -->
                    <span *ngSwitchDefault>{{ 4 }}</span>

                  </ng-container>
                </div>

                <div class="flex-1 h-0.5 bg-gray-200 max-w-[100px]"></div>

                <div
                  class="step w-10 h-10 flex items-center justify-center rounded-full border-2 cursor-pointer transition-all duration-200"
                  [ngClass]="getStepClass(5)" (click)="tryOpenStep(5)">
                  <ng-container [ngSwitch]="getStepIcon(5)">

                    <!-- ACTIVE ICONS -->
                    <svg *ngSwitchCase="'user'" class="step-svg">
                      <use href="#icon-user" />
                    </svg>
                    <svg *ngSwitchCase="'home'" class="step-svg">
                      <use href="#icon-home" />
                    </svg>
                    <svg *ngSwitchCase="'id'" class="step-svg">
                      <use href="#icon-id" />
                    </svg>
                    <svg *ngSwitchCase="'office'" class="step-svg">
                      <use href="#icon-office" />
                    </svg>
                    <svg *ngSwitchCase="'check-circle'" class="step-svg">
                      <use href="#icon-check-circle" />
                    </svg>

                    <!-- VALID -->
                    <svg *ngSwitchCase="'check'" class="step-svg">
                      <use href="#icon-check" />
                    </svg>

                    <!-- INVALID -->
                    <svg *ngSwitchCase="'cross'" class="step-svg">
                      <use href="#icon-cross" />
                    </svg>

                    <!-- DEFAULT NUMBER -->
                    <span *ngSwitchDefault>{{ 5 }}</span>

                  </ng-container>
                </div>

              </div>
            </div>




            <div class="form-floating form-floating-outline mb-4" *ngIf="isEditMode">
              <div class="form-floating form-floating-outline mb-4">
                <input class="form-control" [(ngModel)]="searchText" readonly (click)="getCustomers()"
                  placeholder="Customer ID" />

                <label for="demo">Customer ID</label>
              </div>

              <app-dropdpwn-modal></app-dropdpwn-modal>
            </div>

            <!-- Panels -->
            <div class="wizard-panels">
              <form [formGroup]="form">
                <!-- STEP 1: Basic Details -->
                <section id="panel-1" class="panel" data-step="1" role="tabpanel" aria-labelledby="step-1">
                  <h4 class="mb-4 text-lg font-semibold">Basic Details</h4>

                  <!-- TOP ROW: stays 1 col mobile / 2 col sm (keeps your original layout) -->
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="glCode" class="form-control w-full" [(ngModel)]="searchText" readonly
                        (click)="getCustomers()" placeholder="G.L.CODE" />
                      <label for="glCode">G.L.CODE</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="agentCode" class="form-control w-full" [(ngModel)]="searchText" readonly
                        (click)="getCustomers()" placeholder="Agent Code" />
                      <label for="agentCode">Agent Code</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="accountNo" class="form-control w-full" [(ngModel)]="searchText" readonly
                        (click)="getCustomers()" placeholder="Account No" />
                      <label for="accountNo">Account No</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="customerId" class="form-control w-full" [(ngModel)]="searchText" readonly
                        (click)="getCustomers()" placeholder="Coustomer Id" />
                      <label for="customerId">Coustomer Id</label>
                    </div>
                  </div>

                  <!-- NAME: full width -->
                  <div class="mt-4">
                    <div class="form-floating form-floating-outline">
                      <input type="text" id="basic_name" class="form-control w-full" restrict="customerName"
                        placeholder="Name" formControlName="name" />
                      <label for="basic_name">Name</label>
                    </div>
                  </div>

                  <!-- ADDRESS ROW: exactly one row with 3 equal columns on lg screens -->
                  <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 items-start">
                    <div class="form-floating form-floating-outline">
                      <input type="text" id="addr_permanent_line1" class="form-control w-full" name="permanentAddrLine1"
                        placeholder="Permanent Address" formControlName="ADDR1" />
                      <label for="addr_permanent_line1">Permanent Address</label>
                    </div>

                    <div class="form-floating form-floating-outline">
                      <input type="text" id="addr_permanent_line2" class="form-control w-full" name="permanentAddrLine2"
                        placeholder="Permanent Address II" formControlName="ADDR2" />
                      <label for="addr_permanent_line2">Permanent Address II</label>
                    </div>

                    <div class="form-floating form-floating-outline">
                      <input type="text" id="addr_permanent_line3" class="form-control w-full" name="permanentAddrLine3"
                        placeholder="Permanent Address III" formControlName="ADDR3" />
                      <label for="addr_permanent_line3">Permanent Address III</label>
                    </div>
                  </div>

                  <!-- PIN CODE placed inside same 2-column grid -->
                  <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="pinCode" class="form-control w-full" placeholder="PIN CODE"
                        formControlName="PINCODE" />
                      <label for="pinCode">PIN CODE</label>
                    </div>

                    <!-- empty placeholder cell so alignment stays perfect -->
                    <div></div>
                  </div>


                  <!-- NAV / buttons (keeps existing alignment) -->
                  <div class="mt-6 flex items-center justify-between gap-3">
                    <button type="button" (click)="navigateTo(1)"
                      class="inline-flex items-center px-5 py-2.5 rounded-lg bg-gray-100 text-gray-800 border">
                      Previous
                    </button>

                    <button type="button" (click)="goToStep(2)"
                      class="inline-flex items-center px-5 py-2.5 rounded-xl bg-violet-600 text-white">
                      Next
                    </button>
                  </div>
                </section>

                <!-- STEP 2: General Information -->
                <section id="panel-2" class="panel" data-step="2" role="tabpanel" aria-labelledby="step-2">
                  <h4 class="mb-4 text-lg font-semibold">General Information</h4>

                  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">

                    <!-- Permanent Address lines -->
                    <div class="form-floating form-floating-outline mb-4">
                       <input type="text" id="customerId" class="form-control w-full" [(ngModel)]="searchText" readonly
                        (click)="getCustomers()" placeholder="Account Type" />
                      <label for="addr_permanent_line1">Account Type</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-4 always-float">
                       <input type="text" id="customerId" class="form-control w-full" [(ngModel)]="searchText" readonly
                        (click)="getCustomers()" placeholder="Mode Of Operation" />
                      <label for="addr_permanent_line2">Mode Of Operation</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-4 always-float">
                      <input type="text" id="IDProof" class="form-control" placeholder="I.D.Proof"
                          [value]="idproofName" readonly (click)="picker.openPicker('idproof','primary')"
                          style="cursor:pointer" />
                        <input type="hidden" name="PerentCode" [(ngModel)]="idproofCode"
                          [ngModelOptions]="{standalone: true}" />
                        <label for="Perent">Perent</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="addr_city" class="form-control" placeholder="Sign Auth"                        
                        style="cursor:pointer" />

                      <label for="addr_city">Sign Auth</label>
                    </div>

                    <!-- Other Information Country -->
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="OtherInformation " class="form-control" placeholder="Other Information "      />
                      <label for="OtherInformation ">Other Information </label>
                    </div>

                    <!-- Introduced By Code State -->
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="IntroducedByCode" class="form-control"  placeholder="Introduced By Code" />
                      <label for="IntroducedByCode">Introduced By Code</label>
                    </div>

                    <!-- Introduced By District -->
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="addr_district" class="form-control" placeholder="Introduced By" />
                      <label for="addr_district">Introduced By </label>
                    </div>

                    <!-- Primary Taluka -->
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="addr_taluka" class="form-control" placeholder="Deposit Collectopn Mode"
                         />
                      <label for="addr_taluka">Deposit Collectopn Mode</label>
                    </div>

                    <!-- ðŸ”µ PRIMARY AREA -->
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="addr_area" class="form-control" placeholder="Ref.Staff I"
                        style="cursor:pointer" />
                    
                      <label for="addr_area">Ref.Staff I</label>
                    </div>

                    <!-- Primary Ref.Staff II -->
                    <div class="form-floating form-floating-outline mb-4">
                      <input type="text" id="addr_pincode" class="form-control" readonly placeholder="Ref.Staff II" />
                      <label for="addr_pincode">Ref.Staff II</label>
                    </div>
                  </div>


              
                  <!-- Nav buttons -->
                  <div class="mt-6 flex items-center justify-between gap-3">

                    <!-- PREVIOUS -->
                    <button type="button" (click)="navigateTo(1)"
                      class="inline-flex items-center px-5 py-2.5 rounded-lg bg-gray-100 text-gray-800 border">
                      Previous
                    </button>

                    <!-- NEXT -->
                    <button type="button" (click)="goToStep(3)"
                      class="inline-flex items-center px-5 py-2.5 rounded-xl bg-violet-600 text-white">
                      Next
                    </button>

                  </div>

                </section>



                <!-- Shared picker modal -->
                <app-picker-modal></app-picker-modal>
                <app-dropdpwn-modal></app-dropdpwn-modal>

                <!-- STEP 3: Personal + Company/Firm conditional content -->
                <section id="panel-3" class="panel" data-step="3" role="tabpanel" aria-labelledby="step-3">
                  <div *ngIf="accountType === '0'">
                    <h4 class="mb-4 text-lg font-semibold">Scheme</h4>
                    <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
                      <!-- Religion -->
                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" id="religionCode" class="form-control" placeholder="Interest Scheme "
                          [value]="religionName" readonly (click)="picker.openPicker('religion','primary')"
                          style="cursor:pointer" />
                        <input type="hidden" name="religionCode" [(ngModel)]="religionCode"
                          [ngModelOptions]="{standalone: true}" />
                        <label for="religionCode">Interest Scheme </label>
                      </div>

                      <!-- Cast -->
                      <div class="form-floating form-floating-outline mb-0">
                        <input type="date" id="castCode" class="form-control" placeholder="A/c Opening Date"  />
                        <label for="castCode">A/c Opening Date</label>
                      </div>

                      <!-- Occupation -->
                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" id="occupation" class="form-control" placeholder=" Int.Rate" />
                        <label for="occupation"> Int.Rate</label>
                      </div>


                      <div class="flex-1">
                        <div class="form-floating form-floating-outline flex-1">

                          <input type="text" class="form-control" placeholder="Passport No." passportFormat
                            validatedInput="passport" formControlName="passportno" />

                          <label>Passport No.</label>

                          <small class="text-danger mt-1 block" *ngIf="passport?.invalid?.()">
                            Invalid Passport No (e.g., A1234567)
                          </small>

                        </div>
                      </div>


                      <div class="form-floating form-floating-outline mb-0 sm:col-span-2">
                        <input type="date" class="form-control" id="passportExp" placeholder="Passport Exp.Date"
                          formControlName="passexpdate" />
                        <label for="passportExp">Passport Exp. Date</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0 sm:col-span-3">
                        <input type="text" class="form-control" id="passportIssueAuth"
                          placeholder="Passport Issue Authority" formControlName="passauth" />
                        <label for="passportIssueAuth">Passport Issue Authority</label>
                      </div>
                      
                      <div class="flex-1">
                        <div class="form-floating form-floating-outline flex-1">

                          <input type="text" class="form-control" placeholder="Election Card No." voteridFormat
                            validatedInput="voterid" formControlName="voteridno" />

                          <label>Election Card No.</label>

                          <small class="text-danger mt-1 block" *ngIf="voterid?.invalid?.()">
                            Invalid Voter ID (e.g., ABC1234567)
                          </small>

                        </div>
                      </div>


                      <div class="form-floating form-floating-outline mb-0">
                        <input type="date" class="form-control" id="birthDate" placeholder="Birth Date"
                          formControlName="birthdate" />
                        <label for="birthDate">Birth Date</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0">
                        <input type="number" class="form-control" id="age" placeholder="Age" min="0"
                          formControlName="AGE" />
                        <label for="age">Age</label>
                      </div>

                      <div class="sm:col-span-3">
                        <div class="flex items-center gap-4 py-2">
                          <span class="text-sm font-medium mr-2">Gender :</span>

                          <label class="inline-flex items-center gap-2 text-sm cursor-pointer">
                            <input type="radio" formControlName="SEX" value="M"
                              class="w-4 h-4 text-violet-600 border-gray-300" />
                            <span>Male</span>
                          </label>

                          <label class="inline-flex items-center gap-2 text-sm cursor-pointer">
                            <input type="radio" formControlName="SEX" value="F"
                              class="w-4 h-4 text-violet-600 border-gray-300" />
                            <span>Female</span>
                          </label>

                          <label class="inline-flex items-center gap-2 text-sm cursor-pointer">
                            <input type="radio" formControlName="SEX" value="O"
                              class="w-4 h-4 text-violet-600 border-gray-300" />
                            <span>Other</span>
                          </label>
                        </div>
                      </div>



                      <!-- Other / Staff (fixed small width) -->
                      <div class="sm:col-span-3">
                        <div class="flex items-start gap-4">
                          <div class="w-36 min-w-[9rem]">
                            <div class="form-floating form-floating-outline flex-1 max-w-[140px]">
                              <select id="otherStaffType" class="form-select" [(ngModel)]="otherStaffType"
                                (change)="onOtherStaffTypeChange()" [ngModelOptions]="{standalone: true}">
                                <option value="O">Other</option>
                                <option value="S">Staff</option>
                              </select>
                              <label for="otherStaffType">Other/Staff</label>
                            </div>
                          </div>

                          <div class="flex-1">
                            <div class="form-floating form-floating-outline flex-1">
                              <input class="form-control" type="text" [readonly]="true"
                                [disabled]="otherStaffType === 'O' || isOtherStaffSelected"
                                (click)="loadOtherStaffList()" [value]="otherStaffName?.name || otherStaffName || ''"
                                placeholder="Select Other/Staff" />
                              <label for="otherStaffName">Other/Staff Name</label>
                            </div>
                          </div>
                        </div>
                      </div>


                    </div>
                  </div>

                  <!-- COMPANY/FIRM DETAILS: shown only for non-Individual -->
                  <div *ngIf="accountType !== '0'">
                    <h4 class="mb-4 text-lg font-semibold">Company/Firm Details</h4>
                    <div class="grid grid-cols-1 gap-4 sm:grid-cols-3">
                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" class="form-control" id="regNo" placeholder="Reg.No."
                          formControlName="COMPREGNO" />
                        <label for="regNo">Reg.No.</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" class="form-control" id="regDate" placeholder="Reg.Date"
                          formControlName="COMPREGDT" />
                        <label for="regDate">Reg.Date</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" class="form-control" id="numBranches" placeholder="No.Of Branches"
                          formControlName="COMPBRANCH" />
                        <label for="numBranches">No.Of Branches</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" class="form-control" id="businessNature" placeholder="Business Nature"
                          formControlName="COMPNATURE" />
                        <label for="businessNature">Business Nature</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" class="form-control" id="paidUpCapital" placeholder="Paid Up Capital"
                          formControlName="COMPPAIDCAPT" />
                        <label for="paidUpCapital">Paid Up Capital</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0">
                        <input type="text" class="form-control" id="lastYearTurnover" placeholder="Last Year TurnOver"
                          formControlName="COMPTURNOVER" />
                        <label for="lastYearTurnover">Last Year TurnOver</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0 sm:col-span-1">
                        <input type="text" class="form-control" id="netWorth" placeholder="Net Worth Rs."
                          formControlName="COMPNETWORTH" />
                        <label for="netWorth">Net Worth Rs.</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0 sm:col-span-1">
                        <input type="text" class="form-control" id="officerName1" placeholder="Officer Name 1"
                          formControlName="Propritor1" />
                        <label for="officerName1">Officer Name 1</label>
                      </div>

                      <div class="form-floating form-floating-outline mb-0 sm:col-span-1">
                        <input type="text" class="form-control" id="officerName2" placeholder="Officer Name 2"
                          formControlName="Propritor2" />
                        <label for="officerName2">Officer Name 2</label>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex items-center justify-between gap-3">

                    <!-- PREVIOUS -->
                    <button type="button" (click)="navigateTo(2)"
                      class="inline-flex items-center px-5 py-2.5 rounded-lg bg-gray-100 text-gray-800 border">
                      Previous
                    </button>

                    <!-- NEXT -->
                    <button type="button" (click)="goToStep(4)"
                      class="inline-flex items-center px-5 py-2.5 rounded-xl bg-violet-600 text-white">
                      Next
                    </button>

                  </div>

                </section>

                <!-- STEP 4: Other Details (omitted lengthy bits for brevity) -->
                <section id="panel-4" class="panel" data-step="4" role="tabpanel" aria-labelledby="step-4">
                  <h4 class="mb-4 text-lg font-semibold">Other Details</h4>
                  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="officeName" placeholder="Office Name"
                        formControlName="officename" />
                      <label for="officeName">Office Name</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="officePin" placeholder="PinCode"
                        formControlName="OFFICEPIN" />
                      <label for="officePin">PinCode</label>
                    </div>

                    <div class="hidden lg:block"></div>

                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="officeAddr1" placeholder="Office Address I"
                        formControlName="OFFICEADDR1" />
                      <label for="officeAddr1">Office Address</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="officeAddr2" placeholder="Office Address II"
                        formControlName="OFFICEADDR2" />
                      <label for="officeAddr2">Office Address II</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="officeAddr3" placeholder="Office Address III"
                        formControlName="OFFICEADDR3" />
                      <label for="officeAddr3">Office Address III</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="officePhone" placeholder="Office Phone No"
                        formControlName="OFFICEPHONE" />
                      <label for="officePhone">Office Phone No</label>
                    </div>

                    <div class="form-floating form-floating-outline mb-0">
                      <input type="text" class="form-control" id="faxNo" placeholder="Fax No"
                        formControlName="OFFICEPHONE1" />
                      <label for="faxNo">Fax No.</label>
                    </div>

                    <div class="flex-1">
                      <div class="form-floating form-floating-outline flex-1">

                        <input type="email" class="form-control" placeholder="Email" validatedInput="email"
                          formControlName="EMAIL_ID" />

                        <label>Email</label>

                        <small class="text-danger mt-1 block" *ngIf="email.invalid()">
                          Enter a valid email address
                        </small>

                      </div>
                    </div>





                  </div>

                  <div class="mt-6 flex items-center justify-between gap-3">

                    <!-- PREVIOUS -->
                    <button type="button" (click)="navigateTo(3)"
                      class="inline-flex items-center px-5 py-2.5 rounded-lg bg-gray-100 text-gray-800 border">
                      Previous
                    </button>

                    <!-- NEXT -->
                    <button type="button" (click)="goToStep(5)"
                      class="inline-flex items-center px-5 py-2.5 rounded-xl bg-violet-600 text-white">
                      Next
                    </button>

                  </div>
                </section>

                <!-- STEP 5: KYC Details -->
                <section id="panel-5" class="panel" data-step="5" role="tabpanel" aria-labelledby="step-5">
                  <h4 class="mb-4 text-lg font-semibold">KYC Details</h4>


                  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- I.D. Proof -->
                    <div class="flex items-center gap-3">
                      <input type="checkbox" id="chk_idProof" name="idProofCheck"
                        class="w-5 h-5 accent-violet-600 rounded-sm shadow-sm" formControlName="KycIdProof" />
                      <div class="form-floating form-floating-outline flex-1">
                        <!-- <input type="text" id="IDProof" class="form-control" placeholder="I.D.Proof" name="IDProof"
                  [value]="idproofName" readonly (click)="openPicker('idproof')" style="cursor:pointer" /> -->
                        <input type="text" id="IDProof" class="form-control" placeholder="I.D.Proof"
                          [value]="idproofName" readonly (click)="picker.openPicker('idproof','primary')"
                          style="cursor:pointer" />
                        <input type="hidden" name="IDProofCode" [(ngModel)]="idproofCode"
                          [ngModelOptions]="{standalone: true}" />
                        <label for="IDProof">I.D.Proof</label>
                      </div>
                    </div>

                    <!-- Address Proof -->
                    <div class="flex items-center gap-3">
                      <input type="checkbox" id="chk_addressProof" name="addressProofCheck"
                        class="w-5 h-5 accent-violet-600 rounded-sm shadow-sm" formControlName="KycAddrProof" />
                      <div class="form-floating form-floating-outline flex-1">
          
                        <input type="text" id="AddressProof" class="form-control" placeholder="Address Proof"
                          [value]="addrproofName" readonly (click)="picker.openPicker('addrproof','primary')"
                          style="cursor:pointer" />
                        <input type="hidden" name="AddpProofCode" [(ngModel)]="addrproofCode"
                          [ngModelOptions]="{standalone: true}" />
                        <label for="AddressProof">Address Proof</label>
                      </div>
                    </div>

                    <!-- Empty third column -->
                    <div class="flex items-center gap-3">
                      <!-- Empty space -->
                    </div>
                  </div>

                  <div class="mt-6">
                    <hr
                      class="border-0 h-1 rounded bg-gradient-to-r from-violet-600 via-violet-500 to-violet-400 shadow-[0_6px_18px_rgba(140,87,255,0.12)] mb-6" />
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Photo -->
                    <div class="rounded-xl border border-gray-200 p-4">
                      <div class="text-sm font-semibold text-gray-800">Photo</div>
                      <div class="mt-3">
                        <input type="file" accept="image/*" aria-label="Upload Photo"
                          (change)="onFileChange($event, 'photo')"
                          class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60 file-input"
                          #photoInput data-key="photo">
                      </div>
                      <div class="mt-3">
                        <div
                          class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden"
                          (click)="openPreview('photo')" tabindex="0" (keydown.enter)="openPreview('photo')"
                          (keydown.space)="$event.preventDefault(); openPreview('photo')" role="button"
                          aria-label="Preview Photo">
                          <img [src]="previews.photo || ''" *ngIf="previews.photo && isImage(previews.photo)"
                            alt="Photo preview" class="w-full h-full object-contain" />
                          <span class="text-sm font-medium text-gray-400" *ngIf="!previews.photo">Preview</span>
                        </div>
                      </div>
                    </div>

                    <!-- Sign -->
                    <div class="rounded-xl border border-gray-200 p-4">
                      <div class="text-sm font-semibold text-gray-800">Sign</div>
                      <div class="mt-3">
                        <input type="file" accept="image/*" aria-label="Upload Signature"
                          (change)="onFileChange($event, 'sign')"
                          class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60 file-input"
                          #signInput data-key="sign">
                      </div>
                      <div class="mt-3">
                        <div
                          class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden"
                          (click)="openPreview('sign')" tabindex="0" (keydown.enter)="openPreview('sign')"
                          (keydown.space)="$event.preventDefault(); openPreview('sign')" role="button"
                          aria-label="Preview Signature">
                          <img [src]="previews.sign || ''" *ngIf="previews.sign && isImage(previews.sign)"
                            alt="Signature preview" class="w-full h-full object-contain" />
                          <span class="text-sm font-medium text-gray-400" *ngIf="!previews.sign">Preview</span>
                        </div>
                      </div>
                    </div>

                    <!-- PAN -->
                    <div class="rounded-xl border border-gray-200 p-4">
                      <div class="text-sm font-semibold text-gray-800">ID Proof (PAN)</div>
                      <div class="mt-3">
                        <input type="file" accept="image/*,.pdf" aria-label="Upload PAN"
                          (change)="onFileChange($event, 'pan')"
                          class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60 file-input"
                          #panInput data-key="pan">
                      </div>
                      <div class="mt-3">
                        <div
                          class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden"
                          (click)="openPreview('pan')" tabindex="0" (keydown.enter)="openPreview('pan')"
                          (keydown.space)="$event.preventDefault(); openPreview('pan')" role="button"
                          aria-label="Preview PAN">
                          <img [src]="previews.pan || ''" *ngIf="previews.pan && isImage(previews.pan)"
                            alt="PAN preview" class="w-full h-full object-contain" />
                          <div class="flex flex-col items-center gap-1 text-gray-500"
                            *ngIf="previews.pan && !isImage(previews.pan)">
                            <i class="fa-solid fa-file-pdf text-3xl"></i>
                            <span class="text-sm">PDF Document</span>
                          </div>
                          <span class="text-sm font-medium text-gray-400" *ngIf="!previews.pan">Preview</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                    <!-- Aadhaar Front -->
                    <div class="rounded-xl border border-gray-200 p-4">
                      <div class="text-sm font-semibold text-gray-800">Address Proof (Aadhaar Front)</div>
                      <div class="mt-3">
                        <input type="file" accept="image/*,.pdf" aria-label="Upload Aadhaar Front"
                          (change)="onFileChange($event, 'aadhaarFront')"
                          class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60 file-input"
                          #aadhaarFrontInput data-key="aadhaarFront">
                      </div>
                      <div class="mt-3">
                        <div
                          class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden"
                          (click)="openPreview('aadhaarFront')" tabindex="0"
                          (keydown.enter)="openPreview('aadhaarFront')"
                          (keydown.space)="$event.preventDefault(); openPreview('aadhaarFront')" role="button"
                          aria-label="Preview Aadhaar front">
                          <img [src]="previews.aadhaarFront || ''"
                            *ngIf="previews.aadhaarFront && isImage(previews.aadhaarFront)" alt="Aadhaar front preview"
                            class="w-full h-full object-contain" />
                          <div class="flex flex-col items-center gap-1 text-gray-500"
                            *ngIf="previews.aadhaarFront && !isImage(previews.aadhaarFront)">
                            <i class="fa-solid fa-file-pdf text-3xl"></i>
                            <span class="text-sm">PDF Document</span>
                          </div>
                          <span class="text-sm font-medium text-gray-400" *ngIf="!previews.aadhaarFront">Preview</span>
                        </div>
                      </div>
                    </div>

                    <!-- Aadhaar Back -->
                    <div class="rounded-xl border border-gray-200 p-4">
                      <div class="text-sm font-semibold text-gray-800">Address Proof (Aadhaar Back)</div>
                      <div class="mt-3">
                        <input type="file" accept="image/*,.pdf" aria-label="Upload Aadhaar Back"
                          (change)="onFileChange($event, 'aadhaarBack')"
                          class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60 file-input"
                          #aadhaarBackInput data-key="aadhaarBack">
                      </div>
                      <div class="mt-3">
                        <div
                          class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden"
                          (click)="openPreview('aadhaarBack')" tabindex="0" (keydown.enter)="openPreview('aadhaarBack')"
                          (keydown.space)="$event.preventDefault(); openPreview('aadhaarBack')" role="button"
                          aria-label="Preview Aadhaar back">
                          <img [src]="previews.aadhaarBack || ''"
                            *ngIf="previews.aadhaarBack && isImage(previews.aadhaarBack)" alt="Aadhaar back preview"
                            class="w-full h-full object-contain" />
                          <div class="flex flex-col items-center gap-1 text-gray-500"
                            *ngIf="previews.aadhaarBack && !isImage(previews.aadhaarBack)">
                            <i class="fa-solid fa-file-pdf text-3xl"></i>
                            <span class="text-sm">PDF Document</span>
                          </div>
                          <span class="text-sm font-medium text-gray-400" *ngIf="!previews.aadhaarBack">Preview</span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex items-center justify-between gap-3">
                    <label for="step-4"
                      class="inline-flex items-center justify-center px-5 py-2.5 rounded-lg bg-gray-100 text-gray-800 border-2 border-gray-200 hover:bg-gray-200 cursor-pointer">Previous</label>
                    <button type="submit"
                      class="px-5 py-2.5 rounded-lg bg-violet-600 text-white shadow hover:bg-violet-700"
                      (click)="submit()">Save</button>
                  </div>
                </section>
              </form>
            </div> <!-- /wizard-panels -->
          </div>
        </div>
      </div>

      <!-- RIGHT: fixed aside (20%) â€” modern purple/white theme, ALWAYS FIXED in viewport -->
      <aside class="hidden lg:block fixed top-24 right-8 w-72 z-40 transform-gpu will-change-transform"
        aria-label="Party Info">
        <div
          class="h-full rounded-lg bg-white border border-gray-200 shadow-lg overflow-hidden ring-1 ring-[#8c57ff]/8">
          <!-- gradient header -->
          <div class="px-4 py-3 bg-gradient-to-r from-[#8c57ff] to-[#a855f7] text-white">
            <div class="text-xs uppercase tracking-wide font-semibold opacity-90">A/c Opening Date</div>
            <div class="mt-1 text-lg font-bold">17/09/2025</div>
            <div class="mt-2 text-sm font-medium text-white/90">Party Info</div>
          </div>

          <!-- body -->
          <div class="p-4 text-sm text-gray-700">
            <ul class="space-y-3">
              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Member Type</span>
                <span class="text-rose-700 font-semibold">Associate</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Member No.</span>
                <span class="text-rose-700 font-semibold">16</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Birth Date</span>
                <span class="text-rose-700 font-semibold">04/05/1971</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Age</span>
                <span class="text-rose-700 font-semibold">54</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Sex</span>
                <span class="text-rose-700 font-semibold">Male</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Mobile No.</span>
                <span class="text-rose-700 font-medium">8180821172</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Phone No.</span>
                <span class="text-rose-700 font-medium">025614589654785</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Zone</span>
                <span class="text-rose-700 font-medium uppercase">MANGALORE</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Aadhar No.</span>
                <span class="text-rose-700 font-medium">8545621698723</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">PAN No.</span>
                <span class="text-rose-700 font-medium">SFDGD812424</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">G.S.T. No.</span>
                <span class="text-rose-700 font-medium">HYUDFGEDEDIED522</span>
              </li>

              <li class="flex justify-between items-start">
                <span class="font-medium text-gray-600">Occupation</span>
                <span class="text-rose-700 font-medium">DEVELOPER</span>
              </li>
            </ul>

            <div class="mt-4 text-center">
              <a href="#" class="inline-block text-sm font-medium text-[#6b21a8] underline">Click Here To See<br />Photo
                and Signature</a>
            </div>
          </div>
        </div>
      </aside>

    </div>
  </div>
</main>

<!-- PREVIEW modal kept as-is (your existing modal markup) -->
<!-- ... -->

<!-- Styles (kept inline so copy/paste is simple) -->
<style>
  /* keep wizard-state visually hidden */
  .wizard-state {
    position: absolute;
    opacity: 0;
    pointer-events: none;
  }

  /* panel toggles */
  .wizard-panels .panel {
    display: none;
  }

  #step-1:checked~.wizard-panels #panel-1 {
    display: block;
  }

  #step-2:checked~.wizard-panels #panel-2 {
    display: block;
  }

  #step-3:checked~.wizard-panels #panel-3 {
    display: block;
  }

  #step-4:checked~.wizard-panels #panel-4 {
    display: block;
  }

  #step-5:checked~.wizard-panels #panel-5 {
    display: block;
  }

  /* Subtle card shadow / rounded look */
  .card-body {
    background: transparent;
  }

  /* step active style (you had earlier) */
  #step-1:checked~.wizard-steps label[for="step-1"],
  #step-2:checked~.wizard-steps label[for="step-2"],
  #step-3:checked~.wizard-steps label[for="step-3"],
  #step-4:checked~.wizard-steps label[for="step-4"],
  #step-5:checked~.wizard-steps label[for="step-5"] {
    background: linear-gradient(135deg, #8c57ff 0%, #a855f7 100%);
    color: white;
    border-color: transparent;
    box-shadow: 0 6px 18px rgba(140, 87, 255, 0.25);
    transform: translateY(-1px);
  }
</style>