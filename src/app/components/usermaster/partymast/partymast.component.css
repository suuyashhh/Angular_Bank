/* Modal container + animation */
.custom-modal-fade .modal-dialog { transition: transform 0.4s ease-out, opacity 0.4s ease-out !important; }
.custom-modal-dialog { max-width: 560px !important; margin: 1.75rem auto !important; }
.custom-modal-content { border: none !important; border-radius: 20px !important; box-shadow: 0 20px 60px rgba(0,0,0,0.15) !important; overflow: hidden !important; background: white !important; }

/* Header */
.custom-modal-header { background: linear-gradient(135deg,#8c57ff 0%,#a855f7 100%) !important; border-bottom: none !important; padding: 24px 30px !important; position: relative !important; display:flex; align-items:center; justify-content:space-between; }
.modal-title-wrapper { display:flex; align-items:center; gap:12px; }
.custom-modal-title { color: white !important; font-weight:600 !important; font-size:18px !important; margin:0 !important; }

/* Close button (right) */
.custom-btn-close { background: rgba(255,255,255,0.2) !important; border: none !important; border-radius:8px !important; width:36px !important; height:36px !important; display:flex !important; align-items:center !important; justify-content:center !important; opacity:1 !important; backdrop-filter: blur(10px) !important; transition: all 0.3s ease !important; cursor:pointer !important; font-size:20px !important; color:white !important; font-weight:bold !important; }
.custom-btn-close:hover { background: rgba(255,255,255,0.3) !important; transform: rotate(90deg) !important; }
.custom-btn-close::after { content: "Ã—" !important; }

/* Body and form: allow modal to grow up to viewport limit and scroll if content large */
.custom-modal-body { padding: 24px 24px 12px 24px !important; background: white !important; max-height: calc(80vh - 120px); overflow: auto; }

/* Footer with centered buttons */
.custom-modal-footer { border-top: 1px solid #f3f4f6 !important; padding: 16px 20px !important; background: #fafafa !important; display:flex !important; gap:12px !important; justify-content:center !important; margin:0 !important; }

/* Buttons */
.custom-btn { padding:10px 20px !important; border-radius:10px !important; font-weight:600 !important; font-size:14px !important; display:inline-flex !important; align-items:center !important; gap:8px !important; transition: all 0.2s ease !important; border:none !important; cursor:pointer !important; }
.custom-btn-cancel { background:#f3f4f6 !important; color:#6b7280 !important; }
.custom-btn-save { background: linear-gradient(135deg,#8c57ff 0%,#a855f7 100%) !important; color:white !important; box-shadow: 0 4px 15px rgba(140,87,255,0.3) !important; }

/* Form input visuals */
.form-floating-outline .form-control { border:2px solid #e5e7eb !important; border-radius:12px !important; background:#fafafa !important; transition: all 0.2s ease !important; padding:12px 14px !important; }
.form-floating-outline .form-control:focus { outline:none !important; border-color:#8c57ff !important; background:white !important; box-shadow:0 0 0 3px rgba(140,87,255,0.08) !important; transform: translateY(-1px) !important; }
.form-floating-outline label { display:flex !important; align-items:center !important; gap:8px !important; font-weight:600 !important; color:#374151 !important; }
.form-floating-outline label i { font-size:16px !important; color:#8c57ff !important; }

/* Dropdown (inside modal input) */
.branch-input { padding-right: 44px !important; cursor: text; }

/* caret */
.dropdown-caret-button { position:absolute; right:10px; top:50%; transform: translateY(-50%); border:none; background:transparent; width:36px; height:36px; border-radius:8px; display:grid; place-items:center; cursor:pointer; transition: background 0.12s ease, transform 0.12s ease; }
.dropdown-caret-button:hover { background: rgba(255,255,255,0.06); }

/* IMPORTANT: dropdown-panel is in-flow (static) so modal height grows */
.dropdown-panel { position: static; margin-top: 12px; background:#fff; border:2px solid #e5e7eb; border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,0.08); z-index: 1056; max-height: calc(60vh); overflow: hidden; }

/* List */
.dropdown-list { max-height: 50vh; overflow-y: auto; }

/* Items */
.dropdown-item { padding: 12px 14px; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:8px; transition: background 0.12s ease, color 0.12s ease; border-bottom:1px solid #f5f5f5; }
.dropdown-item:last-child { border-bottom: none; }
.dropdown-item:hover { background: #fbf7ff; }
.dropdown-item.is-selected { background: #f7f0ff; border-left: 4px solid #8c57ff; padding-left: 10px; }

.item-name { font-weight:500; color:#374151; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.item-code { font-size:0.85rem; color:#6b7280; margin-left:8px; }

/* Empty state */
.dropdown-empty { padding: 16px 14px; color:#6b7280; text-align:center; font-size:0.9rem; }

/* backdrop click-catcher for dropdown */
.dropdown-backdrop { position: fixed; inset: 0; background: transparent; z-index: 1055; }

/* Responsive */
@media (max-width: 576px) {
  .custom-modal-dialog { margin: 0.5rem !important; width: calc(100% - 1rem) !important; }
  .custom-modal-body { padding: 16px !important; max-height: calc(72vh - 120px); }
  .custom-btn { width:100% !important; justify-content:center !important; }
}

.shake-anim {
  animation: shake 0.3s ease;
}

@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
  100% { transform: translateX(0); }
}

.step {
  transition: all 0.25s ease;
}

.step-svg {
  width: 22px;
  height: 22px;
  fill: currentColor;
}




