<!-- KYC Wizard (Angular template-only) -->
<main class="max-w-7xl mx-auto px-6 py-8">
  <div class="rounded-2xl bg-white shadow-sm ring-1 ring-gray-200 p-0">
    <div class="p-6 sm:p-8">
      <!-- STEP STATE (hidden radios) -->
      <input id="step-1" name="wizard2" type="radio" class="peer/step1 sr-only" checked />
      <input id="step-2" name="wizard2" type="radio" class="peer/step2 sr-only" />

      <!-- STEPPER (clear active + progress) -->
      <div class="mb-6">
        <div class="flex items-center gap-3 justify-center select-none relative">
          <!-- left step -->
          <label for="step-1"
            class="relative z-10 w-10 h-10 grid place-items-center rounded-full border-2 border-gray-200 bg-gray-50 text-gray-500 font-bold cursor-pointer transition
                   hover:border-[#8c57ff]
                   peer-checked/step1:bg-[#8c57ff] peer-checked/step1:text-white peer-checked/step1:border-[#8c57ff] peer-checked/step1:ring-4 peer-checked/step1:ring-[#8c57ff]/20
                   peer-checked/step2:bg-white peer-checked/step2:text-[#8c57ff] peer-checked/step2:border-[#8c57ff]">
            1
          </label>

          <!-- progress track -->
          <div class="relative h-0.5 flex-1 max-w-xl bg-gray-200 rounded-full overflow-hidden">
            <!-- progress fill (grows on step 2) -->
            <div class="absolute left-0 top-0 h-full w-full origin-left scale-x-0 bg-[#8c57ff] transition-transform duration-300
                        peer-checked/step2:scale-x-100"></div>
          </div>

          <!-- right step -->
          <label for="step-2"
            class="relative z-10 w-10 h-10 grid place-items-center rounded-full border-2 border-gray-200 bg-gray-50 text-gray-500 font-bold cursor-pointer transition
                   hover:border-[#8c57ff]
                   peer-checked/step2:bg-[#8c57ff] peer-checked/step2:text-white peer-checked/step2:border-[#8c57ff] peer-checked/step2:ring-4 peer-checked/step2:ring-[#8c57ff]/20">
            2
          </label>
        </div>
      </div>

      <!-- ===================== STEP 1 ===================== -->
      <section aria-labelledby="step-1" class="hidden peer-checked/step1:block">
        <h4 class="mb-4 text-lg font-semibold">Basic Details</h4>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div class="form-floating form-floating-outline mb-4">
            <input type="text" class="form-control" id="custId" placeholder="Customer Id" />
            <label for="custId">Customer Id</label>
          </div>

          <div class="form-floating form-floating-outline mb-4">
            <input type="text" class="form-control" id="acctType" placeholder="A/C Type" />
            <label for="acctType">A/C Type</label>
          </div>

          <div class="form-floating form-floating-outline mb-4">
            <input type="text" class="form-control" id="aadhaar" placeholder="Aadhaar Card No" />
            <label for="aadhaar">Aadhaar Card No</label>
          </div>

          <div class="form-floating form-floating-outline mb-4">
            <input type="text" class="form-control" id="pan" placeholder="Pan Card No" />
            <label for="pan">Pan Card No</label>
          </div>

          <div class="form-floating form-floating-outline mb-4">
            <input type="text" class="form-control" id="gst" placeholder="GST No" />
            <label for="gst">GST No</label>
          </div>

          <div class="form-floating form-floating-outline mb-4">
            <input type="text" class="form-control" id="memberType" placeholder="Member Type" />
            <label for="memberType">Member Type</label>
          </div>
        </div>

        <div class="mt-1 grid grid-cols-1 sm:grid-cols-[140px_1fr] gap-3">
          <div class="form-floating form-floating-outline mb-0">
            <select id="title" class="form-select">
              <option>Mr</option>
              <option>Mrs</option>
              <option>Other</option>
            </select>
            <label for="title">Title</label>
          </div>

          <div class="form-floating form-floating-outline mb-0">
            <input id="widgetName" type="text" class="form-control" placeholder="Name" />
            <label for="widgetName">Name</label>
          </div>
        </div>

        <div class="mt-6 flex items-center justify-between gap-3">
          <span></span>
          <label for="step-2"
                 class="inline-flex items-center justify-center rounded-xl bg-[#8c57ff] px-5 py-2.5 text-white font-medium shadow hover:bg-[#7846e5] cursor-pointer">
            Next
          </label>
        </div>
      </section>

      <!-- ===================== STEP 2 ===================== -->
      <section aria-labelledby="step-2" class="hidden peer-checked/step2:block">
        <!-- Tabs state (hidden radios) -->
        <input id="tab-address"  name="kycTabs" type="radio" class="peer/address sr-only" checked />
        <input id="tab-personal" name="kycTabs" type="radio" class="peer/personal sr-only" />
        <input id="tab-other"    name="kycTabs" type="radio" class="peer/other sr-only" />
        <input id="tab-kyc"      name="kycTabs" type="radio" class="peer/kyc sr-only" />

        <!-- Tab controls (very clear active state + underline) -->
        <div class="mb-4 inline-flex flex-wrap gap-3 rounded-xl border border-gray-200 bg-gray-50 p-2">
          <!-- Address -->
          <div class="flex flex-col items-center">
            <label for="tab-address"
              class="cursor-pointer rounded-lg border border-transparent px-4 py-2 text-sm font-semibold text-gray-700 transition
                     hover:text-[#8c57ff]
                     peer-checked/address:bg-[#8c57ff]/10 peer-checked/address:text-[#8c57ff] peer-checked/address:border-[#8c57ff]">
              Address Details
            </label>
            <span class="hidden h-1 w-3/4 rounded-full bg-[#8c57ff] mt-1 peer-checked/address:block"></span>
          </div>

          <!-- Personal -->
          <div class="flex flex-col items-center">
            <label for="tab-personal"
              class="cursor-pointer rounded-lg border border-transparent px-4 py-2 text-sm font-semibold text-gray-700 transition
                     hover:text-[#8c57ff]
                     peer-checked/personal:bg-[#8c57ff]/10 peer-checked/personal:text-[#8c57ff] peer-checked/personal:border-[#8c57ff]">
              Personal Details
            </label>
            <span class="hidden h-1 w-3/4 rounded-full bg-[#8c57ff] mt-1 peer-checked/personal:block"></span>
          </div>

          <!-- Other -->
          <div class="flex flex-col items-center">
            <label for="tab-other"
              class="cursor-pointer rounded-lg border border-transparent px-4 py-2 text-sm font-semibold text-gray-700 transition
                     hover:text-[#8c57ff]
                     peer-checked/other:bg-[#8c57ff]/10 peer-checked/other:text-[#8c57ff] peer-checked/other:border-[#8c57ff]">
              Other Details
            </label>
            <span class="hidden h-1 w-3/4 rounded-full bg-[#8c57ff] mt-1 peer-checked/other:block"></span>
          </div>

          <!-- KYC -->
          <div class="flex flex-col items-center">
            <label for="tab-kyc"
              class="cursor-pointer rounded-lg border border-transparent px-4 py-2 text-sm font-semibold text-gray-700 transition
                     hover:text-[#8c57ff]
                     peer-checked/kyc:bg-[#8c57ff]/10 peer-checked/kyc:text-[#8c57ff] peer-checked/kyc:border-[#8c57ff]">
              KYC Details
            </label>
            <span class="hidden h-1 w-3/4 rounded-full bg-[#8c57ff] mt-1 peer-checked/kyc:block"></span>
          </div>
        </div>

        <!-- Address panel -->
        <div class="hidden peer-checked/address:block">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="addr1" placeholder="Address Line 1" />
              <label for="addr1">Address Line 1</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="addr2" placeholder="Address Line 2 (optional)" />
              <label for="addr2">Address Line 2 (optional)</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="city" placeholder="City" />
              <label for="city">City</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="pincode" placeholder="Pincode" />
              <label for="pincode">Pincode</label>
            </div>
          </div>
        </div>

        <!-- Personal panel -->
        <div class="hidden peer-checked/personal:block">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="fname" placeholder="First Name" />
              <label for="fname">First Name</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="lname" placeholder="Last Name" />
              <label for="lname">Last Name</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="date" class="form-control" id="dob" placeholder="Date of Birth" />
              <label for="dob">Date of Birth</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="mobile" placeholder="Mobile Number" />
              <label for="mobile">Mobile Number</label>
            </div>
          </div>
        </div>

        <!-- Other panel -->
        <div class="hidden peer-checked/other:block">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="occupation" placeholder="Occupation" />
              <label for="occupation">Occupation</label>
            </div>
            <div class="form-floating form-floating-outline mb-4">
              <input type="text" class="form-control" id="income" placeholder="Annual Income" />
              <label for="income">Annual Income</label>
            </div>
          </div>
        </div>

        <!-- KYC panel -->
        <div class="hidden peer-checked/kyc:block">
          <div class="rounded-xl border border-gray-200 overflow-hidden bg-white">
            <div class="flex gap-3 p-3 overflow-x-auto">
              <!-- Photo -->
              <div class="min-w-[320px] max-w-[360px] flex-1 rounded-xl border border-gray-200 p-4">
                <div class="text-sm font-semibold text-gray-800">Photo</div>
                <div class="mt-3">
                  <input type="file" accept="image/*" aria-label="Upload Photo"
                         (change)="onFileChange($event, 'photo')"
                         class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60">
                </div>
                <div class="mt-3">
                  <div class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden">
                    <img [src]="previews.photo || ''" *ngIf="previews.photo" alt="Photo preview" class="w-full h-full object-contain"/>
                    <span class="text-sm font-medium text-gray-400" *ngIf="!previews.photo">Preview</span>
                  </div>
                </div>
              </div>

              <!-- Sign -->
              <div class="min-w-[320px] max-w-[360px] flex-1 rounded-xl border border-gray-200 p-4">
                <div class="text-sm font-semibold text-gray-800">Sign</div>
                <div class="mt-3">
                  <input type="file" accept="image/*" aria-label="Upload Signature"
                         (change)="onFileChange($event, 'sign')"
                         class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60">
                </div>
                <div class="mt-3">
                  <div class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden">
                    <img [src]="previews.sign || ''" *ngIf="previews.sign" alt="Signature preview" class="w-full h-full object-contain"/>
                    <span class="text-sm font-medium text-gray-400" *ngIf="!previews.sign">Preview</span>
                  </div>
                </div>
              </div>

              <!-- PAN -->
              <div class="min-w-[320px] max-w-[360px] flex-1 rounded-xl border border-gray-200 p-4">
                <div class="text-sm font-semibold text-gray-800">ID Proof (PAN)</div>
                <div class="mt-3">
                  <input type="file" accept="image/*,.pdf" aria-label="Upload PAN"
                         (change)="onFileChange($event, 'pan')"
                         class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60">
                </div>
                <div class="mt-3">
                  <div class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden">
                    <img [src]="previews.pan || ''" *ngIf="previews.pan && isImage(previews.pan)" alt="PAN preview" class="w-full h-full object-contain"/>
                    <div class="flex flex-col items-center gap-1 text-gray-500" *ngIf="previews.pan && !isImage(previews.pan)">
                      <i class="fa-solid fa-file-pdf text-3xl"></i>
                      <span class="text-sm">PDF Document</span>
                    </div>
                    <span class="text-sm font-medium text-gray-400" *ngIf="!previews.pan">Preview</span>
                  </div>
                </div>
              </div>

              <!-- Aadhaar Front -->
              <div class="min-w-[320px] max-w-[360px] flex-1 rounded-xl border border-gray-200 p-4">
                <div class="text-sm font-semibold text-gray-800">Address Proof (Aadhaar Front)</div>
                <div class="mt-3">
                  <input type="file" accept="image/*,.pdf" aria-label="Upload Aadhaar Front"
                         (change)="onFileChange($event, 'aadhaarFront')"
                         class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60">
                </div>
                <div class="mt-3">
                  <div class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden">
                    <img [src]="previews.aadhaarFront || ''" *ngIf="previews.aadhaarFront && isImage(previews.aadhaarFront)" alt="Aadhaar front preview" class="w-full h-full object-contain"/>
                    <div class="flex flex-col items-center gap-1 text-gray-500" *ngIf="previews.aadhaarFront && !isImage(previews.aadhaarFront)">
                      <i class="fa-solid fa-file-pdf text-3xl"></i>
                      <span class="text-sm">PDF Document</span>
                    </div>
                    <span class="text-sm font-medium text-gray-400" *ngIf="!previews.aadhaarFront">Preview</span>
                  </div>
                </div>
              </div>

              <!-- Aadhaar Back -->
              <div class="min-w-[320px] max-w-[360px] flex-1 rounded-xl border border-gray-200 p-4">
                <div class="text-sm font-semibold text-gray-800">Address Proof (Aadhaar Back)</div>
                <div class="mt-3">
                  <input type="file" accept="image/*,.pdf" aria-label="Upload Aadhaar Back"
                         (change)="onFileChange($event, 'aadhaarBack')"
                         class="w-full rounded-xl border-2 border-dashed border-[#8c57ff]/40 bg-[#8c57ff]/5 px-3 py-3 text-sm outline-none file:mr-3 file:rounded-lg file:border-0 file:bg-[#8c57ff] file:px-3 file:py-2 file:text-white hover:border-[#8c57ff]/60">
                </div>
                <div class="mt-3">
                  <div class="relative grid place-items-center w-full h-56 rounded-xl border-2 border-gray-200 bg-gradient-to-br from-gray-50 to-white overflow-hidden">
                    <img [src]="previews.aadhaarBack || ''" *ngIf="previews.aadhaarBack && isImage(previews.aadhaarBack)" alt="Aadhaar back preview" class="w-full h-full object-contain"/>
                    <div class="flex flex-col items-center gap-1 text-gray-500" *ngIf="previews.aadhaarBack && !isImage(previews.aadhaarBack)">
                      <i class="fa-solid fa-file-pdf text-3xl"></i>
                      <span class="text-sm">PDF Document</span>
                    </div>
                    <span class="text-sm font-medium text-gray-400" *ngIf="!previews.aadhaarBack">Preview</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Actions -->
          <div class="mt-4 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3">
            <label for="step-1"
                   class="inline-flex items-center justify-center rounded-xl border-2 border-gray-200 bg-gray-50 px-5 py-2.5 text-gray-800 font-medium hover:bg-gray-100 cursor-pointer">
              Previous
            </label>

            <div class="flex items-center gap-2">
              <button type="button" id="cancel-images"
                      class="inline-flex items-center justify-center rounded-xl bg-rose-600 px-5 py-2.5 text-white font-medium shadow hover:bg-rose-700">
                Cancel Images
              </button>
              <button type="button"
                      class="inline-flex items-center justify-center rounded-xl bg-[#8c57ff] px-5 py-2.5 text-white font-medium shadow hover:bg-[#7846e5]">
                Finish
              </button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</main>
